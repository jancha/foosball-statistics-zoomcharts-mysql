<!DOCTYPE html>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<html lang="en">
<head>
    <meta charset="utf-8" />
    <script src="//cdn.zoomcharts-cloud.com/1/nightly/zoomcharts.js"></script>
</head>
<body>
<div id="c1"></div>
<div id="c2"></div>
<div id="c3"></div>
<script>
    var d= [];
    var s1=[], s2=[], s3=[];
    var names = [null, "Edgars","J훮nis", "K훮rlis","Valts","Ei탑ens","And탑s"];
    var color = [null, "red","green","blue","black","brown","orange"];
    var t1,t2,t3;

    function sync(ev){
        if (ev.origin == "user"){
            var t = ev.chart.targetTime();
            var du = ev.chart.targetDisplayUnit();
            if (t1 != ev.chart){
                t1.time(t[0],t[1]);
                t1.displayUnit(du);
            }
            if (t2 != ev.chart){
                t2.time(t[0],t[1]);
                t2.displayUnit(du);
            }
            if (t3 != ev.chart){
                t3.time(t[0],t[1]);
                t3.displayUnit(du);
            }
        } else {
            var du = ev.chart.targetDisplayUnit();
            for (var x = 1; x <= 3; x++){
                var c = window["t"+x];
                if (c != ev.chart){
                    if (c.displayUnit() != du){
                        c.displayUnit(du);
                    }
                }
            }
        }
    }
    for (var x = 1; x <= 6; x++){
        d.push({
            id: "d" + x,
            units:["y","m","d"],
            url: "service.php?player_id=" + x,
            timestampInSeconds: true
        });
        s1.push({
                data: {source: "d" + x, index: 1, aggregation: "sum"},
                name: names[x],
                type: "line",
                style: {lineColor: color[x], smoothing: true,
                    marker: {shape: "rect", width: 3}}
            }
        );
        s2.push({
                data: {source: "d" + x, index: 2, aggregation: "sum"},
                name: names[x],
                type: "line",
                style: {lineColor: color[x], smoothing: true,
                    marker: {shape: "rect", width: 3}
                }
            }
        );
        s3.push({
                data: {source: "d" + x, index: 3, aggregation: "avg"},
                name: names[x],
                type: "line",
                style: {lineColor: color[x], smoothing: true,
                    marker: {shape: "rect", width: 3}
                }
            }
        );
    }
    t1 = new TimeChart({
        container: document.getElementById("c1"),
        title: {
            text: "Coefficient"
        },
        data:d,
        series:s3,
        valueAxisDefault: {
            zeroLine: "floating",
            scaleAdjustmentTolerance: 0.2
        },
        area: {
            displayUnits: [
                {unit: "1 y", name: "year"},
                {unit: "1 M", name: "month"},
                {unit: "1 d", name: "day"}
            ]
        },
        legend: {
            enabled: true
        },
        events: {
            onChartUpdate: function(ev){
                sync(ev);
            }
        }
    });
    t2 = new TimeChart({
        container: document.getElementById("c2"),
        title: {
            text: "Games won"
        },
        data:d,
        series:s2,
        valueAxisDefault: {
            zeroLine: "floating",
            scaleAdjustmentTolerance: 0.2
        },
        area: {
            displayUnits: [
                {unit: "1 y", name: "year"},
                {unit: "1 M", name: "month"},
                {unit: "1 d", name: "day"}
            ]
        },
        legend: {
            enabled: true
        },
        events: {
            onTimeChange: function(ev){
                sync(ev);
            }
        }
    });
    t3 = new TimeChart({
        container: document.getElementById("c3"),
        title: {
            text: "Games played"
        },
        data:d,
        series:s1,
        valueAxisDefault: {
            zeroLine: "floating",
            scaleAdjustmentTolerance: 0.2
        },
        area: {
            displayUnits: [
                {unit: "1 y", name: "year"},
                {unit: "1 M", name: "month"},
                {unit: "1 d", name: "day"}
            ]
        },
        legend: {
            enabled: true
        },
        events: {
            onTimeChange: function(ev){
                sync(ev);
            }
        }
    });

</script>

